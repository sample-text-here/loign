{
  "{\"filename\":\"/app/server.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.3": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/server.js",
      "filenameRelative": "/app/server.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "server.js",
      "sourceFileName": "server.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "server"
    },
    "ignored": false,
    "code": "// server.js\n// where your node app starts\n\n// init project\nconst express = require(\"express\");\nconst bodyParser = require(\"body-parser\");\nconst Cookies = require(\"cookie-parser\");\nconst favicon = require(\"express-favicon\");\nconst app = express();\nconst fs = require(\"fs\");\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\nconst allowWrite = true;\nconst allowReset = false;\n\n// we've started you off with Express,\n// but feel free to use whatever libs or frameworks you'd like through `package.json`.\n\n// http://expressjs.com/en/starter/static-files.html\napp.use(express.static(\"public\"));\napp.use(favicon(`${__dirname}/public/favicon.ico`));\napp.use(Cookies());\n\n// init sqlite db\nconst dbFile = \"./.data/sqlite.db\";\nconst exists = fs.existsSync(dbFile);\nconst sqlite3 = require(\"sqlite3\").verbose();\nconst db = new sqlite3.Database(dbFile);\n\n// if ./.data/sqlite.db does not exist, create it, otherwise print records to console\ndb.serialize(() => {\n  if (!exists) {\n    db.run(\"DROP TABLE IF EXISTS Users\");\n    db.run(\"DROP TABLE IF EXISTS Posts\");\n    db.run(\"CREATE TABLE Users (id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT, password Text, joined TEXT, status TEXT, like TEXT, bad TEXT, profilepic BLOB)\");\n    db.run(\"CREATE TABLE Posts (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, post Text, by TEXT, date TEXT, tag TEXT, votes INTEGER, comments TEXT)\");\n    db.run(\"CREATE TABLE Sessions (id INTEGER PRIMARY KEY AUTOINCREMENT, key TEXT expires TEXT)\");\n    console.log(\"it is done\");\n  }\n});\n\n// http://expressjs.com/en/starter/basic-routing.html\napp.get(\"/\", (req, res) => {\n  res.sendFile(`${__dirname}/views/index.html`);\n});\n\n// http://expressjs.com/en/starter/basic-routing.html\napp.get(\"/test\", (req, res) => {\n  db.run(\"ALTER TABLE Users ADD profilepic BLOB\");\n  res.sendFile(`${__dirname}/views/test.html`);\n});\n\napp.get(\"/signup\", (req, res) => {\n  res.sendFile(`${__dirname}/views/signup.html`);\n});\n\n// http://expressjs.com/en/starter/basic-routing.html\napp.get(\"/login\", (req, res) => {\n  res.sendFile(`${__dirname}/views/login.html`);\n});\n\napp.get(\"/edit\", (req, res) => {\n  res.sendFile(`${__dirname}/views/edit.html`);\n});\n\napp.get(\"/t/card\", (req, res) => {\n  res.sendFile(`${__dirname}/templates/card.html`);\n});\n\napp.get(\"/t/comment\", (req, res) => {\n  res.sendFile(`${__dirname}/templates/comment.html`);\n});\n\napp.get(\"/user\", (req, res) => {\n  var data = req.cookies;\n  if (data.user) {\n    db.get(\"SELECT status, joined, like, bad FROM Users WHERE username=?\", [data.user], (err, row) => {\n      if (!err) {\n        if (row) {\n          data.status = row.status;\n          data.like = row.like;\n          data.bad = row.bad;\n        }\n        if (data.like == null) {\n          data.like = \"[]\";\n        }\n        if (data.bad == null) {\n          data.bad = \"[]\";\n        }\n        res.send(data);\n      }\n    });\n  } else res.send({});\n});\n\napp.get(\"/logout\", (req, res) => {\n  res.clearCookie(\"user\").send({ message: \"success\" });\n});\n\napp.get(\"/post\", (req, res) => {\n  res.sendFile(`${__dirname}/views/new.html`);\n});\n\napp.get(\"/@:user\", (req, res) => {\n  res.sendFile(`${__dirname}/views/user.html`);\n});\n\napp.get(\"/~:sub\", (req, res) => {\n  res.sendFile(`${__dirname}/views/sub.html`);\n});\n\napp.get(\"/-:post\", (req, res) => {\n  res.sendFile(`${__dirname}/views/post.html`);\n});\n\napp.get(\"/get/users/:user\", (req, res) => {\n  var data = {};\n  data.user = req.params.user;\n  db.get(\"SELECT status, joined FROM Users WHERE username=?\", [data.user], (err, row) => {\n    if (!err) {\n      if (row) {\n        data.status = row.status;\n        data.joined = row.joined;\n      }\n      res.send(data);\n    }\n  });\n});\n\napp.get(\"/get/users/\", (req, res) => {\n  db.all(\"SELECT username, status, joined FROM Users\", [], (err, row) => {\n    if (!err) {\n      if (row) {\n        res.send(row);\n      }\n    }\n  });\n});\n\napp.get(\"/get/posts/:sub\", (req, res) => {\n  var limit = req.query.limit;\n  var offset = req.query.offset;\n  var user = req.query.user;\n  if (!limit) {\n    limit = 10;\n  }\n  if (!offset) {\n    offset = 0;\n  }\n  if (!user) {\n    user = \"%\";\n  }\n  var data = {};\n  data.sub = req.params.sub;\n  db.all(\"SELECT * FROM Posts WHERE (tag=? AND by LIKE ?) ORDER BY id DESC LIMIT ? OFFSET ?\", [data.sub, user, limit, offset], (err, row) => {\n    if (!err) {\n      if (row) {\n        res.send(row);\n      }\n    }\n  });\n});\n\napp.get(\"/get/posts/\", (req, res) => {\n  var limit = req.query.limit;\n  var offset = req.query.offset;\n  var user = req.query.user;\n  if (!limit) {\n    limit = 10;\n  }\n  if (!offset) {\n    offset = 0;\n  }\n  if (!user) {\n    user = \"%\";\n  }\n  db.all(\"SELECT * FROM Posts WHERE (by LIKE ?) ORDER BY id DESC LIMIT ? OFFSET ?\", [user, limit, offset], (err, row) => {\n    if (!err) {\n      res.send(row);\n    }\n  });\n});\napp.get(\"/get/post/:id\", (req, res) => {\n  db.get(\"SELECT * FROM Posts WHERE id=?\", [req.params.id], (err, row) => {\n    if (!err) {\n      res.send(row);\n    }\n  });\n});\n\napp.post(\"/post/submitPost\", (req, res) => {\n  console.log(`Submit new post ${req.body.title}`);\n  if (allowWrite) {\n    if (!req.cookies.posted) {\n      const title = req.body.title;\n      const post = req.body.post;\n      const tag = req.body.tag;\n      const date = new Date();\n      const by = req.cookies.user;\n      if (by) {\n        db.run(`INSERT INTO Posts (title, post, by, date, tag) VALUES (?,?,?,?,?)`, [title, post, by, date, tag], err => {\n          if (err) {\n            console.log(err);\n            console.log(\"error!\");\n            res.send({\n              message: \"Something happened, please try again\",\n              error: true\n            });\n          } else {\n            console.log(\"success\");\n            res.cookie(\"posted\", true, { maxAge: 60000 }).send({ message: \"success\", error: false });\n          }\n        });\n      } else {\n        res.send({ message: \"No user!\", error: true });\n      }\n    } else {\n      res.send({ message: \"Too many posts!\", error: true });\n    }\n  }\n});\n\napp.post(\"/post/comment\", (req, res) => {\n  var data = {\n    comment: req.body.comment,\n    id: req.body.id,\n    by: req.cookies.user,\n    date: new Date()\n  };\n  if (req.cookies.user && allowWrite) {\n    db.get(\"SELECT (comments) FROM Posts WHERE id=?\", [data.id], (err, row) => {\n      if (!err) {\n        console.log(row);\n        if (row.comments == null) {\n          console.log(\"first\");\n          db.run(\"UPDATE Posts SET comments=? WHERE id=?\", [\"[\" + JSON.stringify(data) + \"]\", data.id]);\n        } else {\n          var com = JSON.parse(row.comments);\n          com.push(data);\n          console.log(com);\n          db.run(\"UPDATE Posts SET comments=? WHERE id=?\", [JSON.stringify(com), data.id]);\n          console.log(data);\n        }\n      } else {\n        console.log(err);\n      }\n    });\n  }\n  res.send(\"hi\");\n});\n\napp.post(\"/post/vote/:wat\", (req, res) => {\n  var which = req.params.wat;\n  var id = req.body.id;\n  var user = req.cookies.user;\n  var select;\n  if (which == \"up\") {\n    select = 1;\n  } else {\n    select = -1;\n  }\n  if (req.cookies.user && allowWrite) {\n    db.get(\"SELECT * FROM Posts WHERE id=?\", [id], (err, row) => {\n      if (!err) {\n        if (which == \"up\") {\n          var opt = \"like\";\n          var add = \"+1\";\n        } else {\n          var opt = \"bad\";\n          var add = \"-1\";\n        }\n        db.get(\"SELECT like FROM Users\", (err, like) => {\n          db.get(\"SELECT bad FROM Users\", (err, bad) => {\n            if (!err) {\n              var out;\n              if (opt == \"like\") {\n                out = JSON.parse(like.like);\n              } else {\n                out = JSON.parse(bad.bad);\n              }\n              if (out == null) {\n                let tmp = [];\n                tmp.push(id);\n                tmp = JSON.stringify(tmp);\n                db.run(`UPDATE Users SET ${opt}=? WHERE username=?`, [tmp, user], err => {\n                  if (err) {\n                    res.send({ error: true });\n                  }\n                });\n                db.run(`UPDATE Posts SET votes=0${add} WHERE id=?`, [id], err => {\n                  if (err) {\n                    res.send({ error: true });\n                  }\n                });\n              } else {\n                var tmp = out;\n                if (out.indexOf(id) == -1) {\n                  tmp.push(id);\n                  db.run(`UPDATE Posts SET votes=votes${add} WHERE id=?`, [id], err => {\n                    if (err) {\n                      res.send({ error: true });\n                    }\n                  });\n                } else {\n                  select = 0;\n                  tmp.splice(tmp.indexOf(id), 1);\n                  if (add == \"+1\") {\n                    add = \"-1\";\n                  } else {\n                    add = \"+1\";\n                  }\n                  db.run(`UPDATE Posts SET votes=votes${add} WHERE id=?`, [id], err => {\n                    if (err) {\n                      res.send({ error: true });\n                    }\n                  });\n                }\n                tmp = JSON.stringify(tmp);\n                db.run(`UPDATE Users SET ${opt}=? WHERE username=?`, [tmp, user], err => {\n                  if (err) {\n                    res.send({ error: true });\n                  }\n                });\n              }\n              if (opt == \"like\") {\n                if (bad.bad != null) {\n                  var tmp = JSON.parse(bad.bad);\n                  if (tmp.indexOf(id) != -1) {\n                    db.run(`UPDATE Users SET bad=? WHERE username=?`, [tmp.splice(tmp, 1), user], err => {\n                      if (err) {\n                        res.send({ error: true });\n                      }\n                    });\n                  }\n                }\n              } else {\n                if (like.like != null) {\n                  var tmp = JSON.parse(like.like);\n                  if (tmp.indexOf(id) != -1) {\n                    db.run(`UPDATE Users SET like=? WHERE username=?`, [tmp.splice(tmp, 1), user], err => {\n                      if (err) {\n                        res.send({ error: true });\n                      }\n                    });\n                  }\n                }\n              }\n              db.get(\"SELECT votes FROM Posts WHERE id=?\", [id], (err, row) => {\n                if (!err) {\n                  res.send({ error: false, votes: row.votes, select: select });\n                } else {\n                  res.send({ error: true });\n                }\n              });\n            } else {\n              res.send({ error: true });\n            }\n          });\n        });\n      } else {\n        res.send({ error: true });\n      }\n    });\n  }\n});\n\napp.post(\"/user/addUser\", (req, res) => {\n  console.log(`add to new user ${req.body}`);\n  if (allowWrite) {\n    const user = cleanseString(req.body.username);\n    const pass = req.body.password;\n    const joined = new Date();\n    console.log(\"Add user: \" + user + \"@\" + pass);\n    db.get(`SELECT username FROM Users WHERE username=?`, [user], (error, row) => {\n      console.log(row);\n      if (!row) {\n        db.run(`INSERT INTO Users (username, password, joined) VALUES (?,?, ?)`, [user, pass, joined], error => {\n          if (error) {\n            console.log(\"error!\");\n            res.send({\n              message: \"Something happened, please try again\",\n              error: true\n            });\n          } else {\n            console.log(\"success\");\n            res.cookie(\"user\", user, { maxAge: 1800000 }).send({ message: \"success\", error: false });\n          }\n        });\n      } else {\n        console.log(\"User already exists!\");\n        res.send({ message: \"User already exists!\", error: true });\n      }\n    });\n  }\n});\n\napp.post(\"/user/login\", (req, res) => {\n  const user = cleanseString(req.body.username);\n  const pass = cleanseString(req.body.password);\n  console.log(\"Login user: \" + user + \"@\" + pass);\n  db.get(`SELECT username FROM Users WHERE username=?`, [user], (error, row) => {\n    if (row) {\n      db.get(`SELECT password FROM Users WHERE username=?`, [user], (err, row) => {\n        if (err) {\n          console.log(\"error!\");\n          res.send({\n            message: \"Something happened, please try again\",\n            error: true\n          });\n        } else {\n          if (row.password == pass) {\n            console.log(\"success\");\n            res.cookie(\"user\", user, { maxAge: 600000 }).send({ message: \"success\", error: false });\n          } else {\n            console.log(\"incorrect password\");\n            res.send({ message: \"Incorrect password\", error: true });\n          }\n        }\n      });\n    } else {\n      console.log(\"user does not exist\");\n      res.send({ message: \"User does not exist\", error: true });\n    }\n  });\n});\n\napp.post(\"/user/deleteUser\", (req, res) => {\n  if (allowWrite) {\n    const user = req.cookies.user;\n    console.log(\"Delete user: \" + user);\n    if (user) {\n      db.get(`SELECT username FROM Users WHERE username=?`, [user], (error, row) => {\n        if (row) {\n          db.run(`DELETE FROM Users WHERE username=?`, [user], err => {\n            if (err) {\n              console.log(\"error!\");\n              res.send({\n                message: \"Something happened, please try again\",\n                error: true\n              });\n            } else {\n              console.log(\"success\");\n              res.send({ message: \"success\", error: false });\n            }\n          });\n        } else {\n          console.log(\"user does not exist\");\n          res.send({ message: \"User does not exist\", error: true });\n        }\n      });\n    } else {\n      console.log(\"no signed in user\");\n      res.send({ message: \"No signed in user\", error: true });\n    }\n  }\n});\n\napp.post(\"/user/updatePass\", (req, res) => {\n  if (allowWrite) {\n    const user = req.cookies.user;\n    const oldpass = req.body.oldpass;\n    const newpass = req.body.newpass;\n    console.log(\"Update user password: \" + user + \" to \" + newpass);\n    if (user) {\n      db.get(`SELECT username FROM Users WHERE username=?`, [user], (error, row) => {\n        if (row) {\n          db.get(`SELECT password FROM Users WHERE username=?`, [user], (error, row) => {\n            if (row.password == oldpass) {\n              db.run(`UPDATE Users SET password=? WHERE username=?`, [newpass, user], err => {\n                if (err) {\n                  console.log(\"error!\");\n                  res.send({\n                    message: \"Something happened, please try again\",\n                    error: true\n                  });\n                } else {\n                  console.log(\"success\");\n                  res.send({ message: \"success\", error: false });\n                }\n              });\n            } else {\n              res.send({\n                message: \"Incorrect password\",\n                error: true\n              });\n            }\n          });\n        } else {\n          console.log(\"user does not exist\");\n          res.send({ message: \"User does not exist\", error: true });\n        }\n      });\n    } else {\n      console.log(\"no signed in user\");\n      res.send({ message: \"No signed in user\", error: true });\n    }\n  }\n});\n\napp.post(\"/user/updateStatus\", (req, res) => {\n  if (allowWrite) {\n    const user = req.cookies.user;\n    // const status = cleanseString(req.body.status);\n    const status = req.body.status;\n    console.log(\"Update user status: \" + user + \" to \" + status);\n    if (user) {\n      db.get(`SELECT username FROM Users WHERE username=?`, [user], (error, row) => {\n        if (row) {\n          db.run(`UPDATE Users SET status=? WHERE username=?`, [status, user], err => {\n            if (err) {\n              console.log(\"error!\");\n              res.send({\n                message: \"Something happened, please try again\",\n                error: true\n              });\n            } else {\n              console.log(\"success\");\n              res.send({ message: \"success\", error: false });\n            }\n          });\n        } else {\n          console.log(\"user does not exist\");\n          res.send({ message: \"User does not exist\", error: true });\n        }\n      });\n    } else {\n      console.log(\"no signed in user\");\n      res.send({ message: \"No signed in user\", error: true });\n    }\n  }\n});\n\napp.get(\"/reset\", (req, res) => {\n  if (allowReset) {\n    db.serialize(() => {\n      db.run(\"DROP TABLE IF EXISTS Users\");\n      db.run(\"DROP TABLE IF EXISTS Posts\");\n      db.run(\"CREATE TABLE Users (id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT, password Text, joined TEXT, status TEXT, like TEXT, bad TEXT, profilepic BLOB)\");\n      db.run(\"CREATE TABLE Posts (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, post Text, by TEXT, date TEXT, tag TEXT, votes INTEGER, comments TEXT)\");\n      db.run(\"CREATE TABLE Sessions (id INTEGER PRIMARY KEY AUTOINCREMENT, key TEXT expires TEXT)\");\n\n      console.log(\"RESET!\");\n    });\n  }\n});\n\n// helper function that prevents html/css/script malice\nconst cleanseString = function (string) {\n  return string.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n};\n\napp.use(function (req, res) {\n  res.status(404).sendFile(`${__dirname}/views/404.html`);\n});\n\n// listen for requests :)\nvar listener = app.listen(process.env.PORT, () => {\n  console.log(`Your app is listening on port ${listener.address().port}`);\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsImJvZHlQYXJzZXIiLCJDb29raWVzIiwiZmF2aWNvbiIsImFwcCIsImZzIiwidXNlIiwidXJsZW5jb2RlZCIsImV4dGVuZGVkIiwianNvbiIsImFsbG93V3JpdGUiLCJhbGxvd1Jlc2V0Iiwic3RhdGljIiwiX19kaXJuYW1lIiwiZGJGaWxlIiwiZXhpc3RzIiwiZXhpc3RzU3luYyIsInNxbGl0ZTMiLCJ2ZXJib3NlIiwiZGIiLCJEYXRhYmFzZSIsInNlcmlhbGl6ZSIsInJ1biIsImNvbnNvbGUiLCJsb2ciLCJnZXQiLCJyZXEiLCJyZXMiLCJzZW5kRmlsZSIsImRhdGEiLCJjb29raWVzIiwidXNlciIsImVyciIsInJvdyIsInN0YXR1cyIsImxpa2UiLCJiYWQiLCJzZW5kIiwiY2xlYXJDb29raWUiLCJtZXNzYWdlIiwicGFyYW1zIiwiam9pbmVkIiwiYWxsIiwibGltaXQiLCJxdWVyeSIsIm9mZnNldCIsInN1YiIsImlkIiwicG9zdCIsImJvZHkiLCJ0aXRsZSIsInBvc3RlZCIsInRhZyIsImRhdGUiLCJEYXRlIiwiYnkiLCJlcnJvciIsImNvb2tpZSIsIm1heEFnZSIsImNvbW1lbnQiLCJjb21tZW50cyIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb20iLCJwYXJzZSIsInB1c2giLCJ3aGljaCIsIndhdCIsInNlbGVjdCIsIm9wdCIsImFkZCIsIm91dCIsInRtcCIsImluZGV4T2YiLCJzcGxpY2UiLCJ2b3RlcyIsImNsZWFuc2VTdHJpbmciLCJ1c2VybmFtZSIsInBhc3MiLCJwYXNzd29yZCIsIm9sZHBhc3MiLCJuZXdwYXNzIiwic3RyaW5nIiwicmVwbGFjZSIsImxpc3RlbmVyIiwibGlzdGVuIiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJhZGRyZXNzIiwicG9ydCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBLE1BQU1BLFVBQVVDLFFBQVEsU0FBUixDQUFoQjtBQUNB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cCIsInNvdXJjZXNDb250ZW50IjpbIi8vIHNlcnZlci5qc1xuLy8gd2hlcmUgeW91ciBub2RlIGFwcCBzdGFydHNcblxuLy8gaW5pdCBwcm9qZWN0XG5jb25zdCBleHByZXNzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5jb25zdCBib2R5UGFyc2VyID0gcmVxdWlyZShcImJvZHktcGFyc2VyXCIpO1xuY29uc3QgQ29va2llcyA9IHJlcXVpcmUoXCJjb29raWUtcGFyc2VyXCIpO1xuY29uc3QgZmF2aWNvbiA9IHJlcXVpcmUoXCJleHByZXNzLWZhdmljb25cIik7XG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcbmFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IHRydWUgfSkpO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5cbmNvbnN0IGFsbG93V3JpdGUgPSB0cnVlO1xuY29uc3QgYWxsb3dSZXNldCA9IGZhbHNlO1xuXG4vLyB3ZSd2ZSBzdGFydGVkIHlvdSBvZmYgd2l0aCBFeHByZXNzLFxuLy8gYnV0IGZlZWwgZnJlZSB0byB1c2Ugd2hhdGV2ZXIgbGlicyBvciBmcmFtZXdvcmtzIHlvdSdkIGxpa2UgdGhyb3VnaCBgcGFja2FnZS5qc29uYC5cblxuLy8gaHR0cDovL2V4cHJlc3Nqcy5jb20vZW4vc3RhcnRlci9zdGF0aWMtZmlsZXMuaHRtbFxuYXBwLnVzZShleHByZXNzLnN0YXRpYyhcInB1YmxpY1wiKSk7XG5hcHAudXNlKGZhdmljb24oYCR7X19kaXJuYW1lfS9wdWJsaWMvZmF2aWNvbi5pY29gKSk7XG5hcHAudXNlKENvb2tpZXMoKSk7XG5cbi8vIGluaXQgc3FsaXRlIGRiXG5jb25zdCBkYkZpbGUgPSBcIi4vLmRhdGEvc3FsaXRlLmRiXCI7XG5jb25zdCBleGlzdHMgPSBmcy5leGlzdHNTeW5jKGRiRmlsZSk7XG5jb25zdCBzcWxpdGUzID0gcmVxdWlyZShcInNxbGl0ZTNcIikudmVyYm9zZSgpO1xuY29uc3QgZGIgPSBuZXcgc3FsaXRlMy5EYXRhYmFzZShkYkZpbGUpO1xuXG4vLyBpZiAuLy5kYXRhL3NxbGl0ZS5kYiBkb2VzIG5vdCBleGlzdCwgY3JlYXRlIGl0LCBvdGhlcndpc2UgcHJpbnQgcmVjb3JkcyB0byBjb25zb2xlXG5kYi5zZXJpYWxpemUoKCkgPT4ge1xuICBpZiAoIWV4aXN0cykge1xuICAgIGRiLnJ1bihcIkRST1AgVEFCTEUgSUYgRVhJU1RTIFVzZXJzXCIpO1xuICAgIGRiLnJ1bihcIkRST1AgVEFCTEUgSUYgRVhJU1RTIFBvc3RzXCIpO1xuICAgIGRiLnJ1bihcbiAgICAgIFwiQ1JFQVRFIFRBQkxFIFVzZXJzIChpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsIHVzZXJuYW1lIFRFWFQsIHBhc3N3b3JkIFRleHQsIGpvaW5lZCBURVhULCBzdGF0dXMgVEVYVCwgbGlrZSBURVhULCBiYWQgVEVYVCwgcHJvZmlsZXBpYyBCTE9CKVwiXG4gICAgKTtcbiAgICBkYi5ydW4oXG4gICAgICBcIkNSRUFURSBUQUJMRSBQb3N0cyAoaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULCB0aXRsZSBURVhULCBwb3N0IFRleHQsIGJ5IFRFWFQsIGRhdGUgVEVYVCwgdGFnIFRFWFQsIHZvdGVzIElOVEVHRVIsIGNvbW1lbnRzIFRFWFQpXCJcbiAgICApO1xuICAgIGRiLnJ1bihcbiAgICAgIFwiQ1JFQVRFIFRBQkxFIFNlc3Npb25zIChpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsIGtleSBURVhUIGV4cGlyZXMgVEVYVClcIlxuICAgICk7XG4gICAgY29uc29sZS5sb2coXCJpdCBpcyBkb25lXCIpO1xuICB9XG59KTtcblxuLy8gaHR0cDovL2V4cHJlc3Nqcy5jb20vZW4vc3RhcnRlci9iYXNpYy1yb3V0aW5nLmh0bWxcbmFwcC5nZXQoXCIvXCIsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc2VuZEZpbGUoYCR7X19kaXJuYW1lfS92aWV3cy9pbmRleC5odG1sYCk7XG59KTtcblxuLy8gaHR0cDovL2V4cHJlc3Nqcy5jb20vZW4vc3RhcnRlci9iYXNpYy1yb3V0aW5nLmh0bWxcbmFwcC5nZXQoXCIvdGVzdFwiLCAocmVxLCByZXMpID0+IHtcbiAgZGIucnVuKFwiQUxURVIgVEFCTEUgVXNlcnMgQUREIHByb2ZpbGVwaWMgQkxPQlwiKTtcbiAgcmVzLnNlbmRGaWxlKGAke19fZGlybmFtZX0vdmlld3MvdGVzdC5odG1sYCk7XG59KTtcblxuYXBwLmdldChcIi9zaWdudXBcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzL3NpZ251cC5odG1sYCk7XG59KTtcblxuLy8gaHR0cDovL2V4cHJlc3Nqcy5jb20vZW4vc3RhcnRlci9iYXNpYy1yb3V0aW5nLmh0bWxcbmFwcC5nZXQoXCIvbG9naW5cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzL2xvZ2luLmh0bWxgKTtcbn0pO1xuXG5hcHAuZ2V0KFwiL2VkaXRcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzL2VkaXQuaHRtbGApO1xufSk7XG5cbmFwcC5nZXQoXCIvdC9jYXJkXCIsIChyZXEsIHJlcykgPT4ge1xuICByZXMuc2VuZEZpbGUoYCR7X19kaXJuYW1lfS90ZW1wbGF0ZXMvY2FyZC5odG1sYCk7XG59KTtcblxuYXBwLmdldChcIi90L2NvbW1lbnRcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3RlbXBsYXRlcy9jb21tZW50Lmh0bWxgKTtcbn0pO1xuXG5hcHAuZ2V0KFwiL3VzZXJcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHZhciBkYXRhID0gcmVxLmNvb2tpZXM7XG4gIGlmIChkYXRhLnVzZXIpIHtcbiAgICBkYi5nZXQoXG4gICAgICBcIlNFTEVDVCBzdGF0dXMsIGpvaW5lZCwgbGlrZSwgYmFkIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWU9P1wiLFxuICAgICAgW2RhdGEudXNlcl0sXG4gICAgICAoZXJyLCByb3cpID0+IHtcbiAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICBkYXRhLnN0YXR1cyA9IHJvdy5zdGF0dXM7XG4gICAgICAgICAgICBkYXRhLmxpa2UgPSByb3cubGlrZTtcbiAgICAgICAgICAgIGRhdGEuYmFkID0gcm93LmJhZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGRhdGEubGlrZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBkYXRhLmxpa2UgPSBcIltdXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLmJhZCA9PSBudWxsKSB7XG4gICAgICAgICAgICBkYXRhLmJhZCA9IFwiW11cIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmVzLnNlbmQoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9IGVsc2UgcmVzLnNlbmQoe30pO1xufSk7XG5cbmFwcC5nZXQoXCIvbG9nb3V0XCIsIChyZXEsIHJlcykgPT4ge1xuICByZXMuY2xlYXJDb29raWUoXCJ1c2VyXCIpLnNlbmQoeyBtZXNzYWdlOiBcInN1Y2Nlc3NcIiB9KTtcbn0pO1xuXG5hcHAuZ2V0KFwiL3Bvc3RcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzL25ldy5odG1sYCk7XG59KTtcblxuYXBwLmdldChcIi9AOnVzZXJcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzL3VzZXIuaHRtbGApO1xufSk7XG5cbmFwcC5nZXQoXCIvfjpzdWJcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzL3N1Yi5odG1sYCk7XG59KTtcblxuYXBwLmdldChcIi8tOnBvc3RcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHJlcy5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzL3Bvc3QuaHRtbGApO1xufSk7XG5cbmFwcC5nZXQoXCIvZ2V0L3VzZXJzLzp1c2VyXCIsIChyZXEsIHJlcykgPT4ge1xuICB2YXIgZGF0YSA9IHt9O1xuICBkYXRhLnVzZXIgPSByZXEucGFyYW1zLnVzZXI7XG4gIGRiLmdldChcbiAgICBcIlNFTEVDVCBzdGF0dXMsIGpvaW5lZCBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lPT9cIixcbiAgICBbZGF0YS51c2VyXSxcbiAgICAoZXJyLCByb3cpID0+IHtcbiAgICAgIGlmICghZXJyKSB7XG4gICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICBkYXRhLnN0YXR1cyA9IHJvdy5zdGF0dXM7XG4gICAgICAgICAgZGF0YS5qb2luZWQgPSByb3cuam9pbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJlcy5zZW5kKGRhdGEpO1xuICAgICAgfVxuICAgIH1cbiAgKTtcbn0pO1xuXG5hcHAuZ2V0KFwiL2dldC91c2Vycy9cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGRiLmFsbChcIlNFTEVDVCB1c2VybmFtZSwgc3RhdHVzLCBqb2luZWQgRlJPTSBVc2Vyc1wiLCBbXSwgKGVyciwgcm93KSA9PiB7XG4gICAgaWYgKCFlcnIpIHtcbiAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgcmVzLnNlbmQocm93KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSk7XG5cbmFwcC5nZXQoXCIvZ2V0L3Bvc3RzLzpzdWJcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHZhciBsaW1pdCA9IHJlcS5xdWVyeS5saW1pdDtcbiAgdmFyIG9mZnNldCA9IHJlcS5xdWVyeS5vZmZzZXQ7XG4gIHZhciB1c2VyID0gcmVxLnF1ZXJ5LnVzZXI7XG4gIGlmICghbGltaXQpIHtcbiAgICBsaW1pdCA9IDEwO1xuICB9XG4gIGlmICghb2Zmc2V0KSB7XG4gICAgb2Zmc2V0ID0gMDtcbiAgfVxuICBpZiAoIXVzZXIpIHtcbiAgICB1c2VyID0gXCIlXCI7XG4gIH1cbiAgdmFyIGRhdGEgPSB7fTtcbiAgZGF0YS5zdWIgPSByZXEucGFyYW1zLnN1YjtcbiAgZGIuYWxsKFxuICAgIFwiU0VMRUNUICogRlJPTSBQb3N0cyBXSEVSRSAodGFnPT8gQU5EIGJ5IExJS0UgPykgT1JERVIgQlkgaWQgREVTQyBMSU1JVCA/IE9GRlNFVCA/XCIsXG4gICAgW2RhdGEuc3ViLCB1c2VyLCBsaW1pdCwgb2Zmc2V0XSxcbiAgICAoZXJyLCByb3cpID0+IHtcbiAgICAgIGlmICghZXJyKSB7XG4gICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICByZXMuc2VuZChyb3cpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICApO1xufSk7XG5cbmFwcC5nZXQoXCIvZ2V0L3Bvc3RzL1wiLCAocmVxLCByZXMpID0+IHtcbiAgdmFyIGxpbWl0ID0gcmVxLnF1ZXJ5LmxpbWl0O1xuICB2YXIgb2Zmc2V0ID0gcmVxLnF1ZXJ5Lm9mZnNldDtcbiAgdmFyIHVzZXIgPSByZXEucXVlcnkudXNlcjtcbiAgaWYgKCFsaW1pdCkge1xuICAgIGxpbWl0ID0gMTA7XG4gIH1cbiAgaWYgKCFvZmZzZXQpIHtcbiAgICBvZmZzZXQgPSAwO1xuICB9XG4gIGlmICghdXNlcikge1xuICAgIHVzZXIgPSBcIiVcIjtcbiAgfVxuICBkYi5hbGwoXG4gICAgXCJTRUxFQ1QgKiBGUk9NIFBvc3RzIFdIRVJFIChieSBMSUtFID8pIE9SREVSIEJZIGlkIERFU0MgTElNSVQgPyBPRkZTRVQgP1wiLFxuICAgIFt1c2VyLCBsaW1pdCwgb2Zmc2V0XSxcbiAgICAoZXJyLCByb3cpID0+IHtcbiAgICAgIGlmICghZXJyKSB7XG4gICAgICAgIHJlcy5zZW5kKHJvdyk7XG4gICAgICB9XG4gICAgfVxuICApO1xufSk7XG5hcHAuZ2V0KFwiL2dldC9wb3N0LzppZFwiLCAocmVxLCByZXMpID0+IHtcbiAgZGIuZ2V0KFwiU0VMRUNUICogRlJPTSBQb3N0cyBXSEVSRSBpZD0/XCIsIFtyZXEucGFyYW1zLmlkXSwgKGVyciwgcm93KSA9PiB7XG4gICAgaWYgKCFlcnIpIHtcbiAgICAgIHJlcy5zZW5kKHJvdyk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5hcHAucG9zdChcIi9wb3N0L3N1Ym1pdFBvc3RcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBTdWJtaXQgbmV3IHBvc3QgJHtyZXEuYm9keS50aXRsZX1gKTtcbiAgaWYgKGFsbG93V3JpdGUpIHtcbiAgICBpZiAoIXJlcS5jb29raWVzLnBvc3RlZCkge1xuICAgICAgY29uc3QgdGl0bGUgPSByZXEuYm9keS50aXRsZTtcbiAgICAgIGNvbnN0IHBvc3QgPSByZXEuYm9keS5wb3N0O1xuICAgICAgY29uc3QgdGFnID0gcmVxLmJvZHkudGFnO1xuICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICBjb25zdCBieSA9IHJlcS5jb29raWVzLnVzZXI7XG4gICAgICBpZiAoYnkpIHtcbiAgICAgICAgZGIucnVuKFxuICAgICAgICAgIGBJTlNFUlQgSU5UTyBQb3N0cyAodGl0bGUsIHBvc3QsIGJ5LCBkYXRlLCB0YWcpIFZBTFVFUyAoPyw/LD8sPyw/KWAsXG4gICAgICAgICAgW3RpdGxlLCBwb3N0LCBieSwgZGF0ZSwgdGFnXSxcbiAgICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIVwiKTtcbiAgICAgICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU29tZXRoaW5nIGhhcHBlbmVkLCBwbGVhc2UgdHJ5IGFnYWluXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgIHJlc1xuICAgICAgICAgICAgICAgIC5jb29raWUoXCJwb3N0ZWRcIiwgdHJ1ZSwgeyBtYXhBZ2U6IDYwMDAwIH0pXG4gICAgICAgICAgICAgICAgLnNlbmQoeyBtZXNzYWdlOiBcInN1Y2Nlc3NcIiwgZXJyb3I6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogXCJObyB1c2VyIVwiLCBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiBcIlRvbyBtYW55IHBvc3RzIVwiLCBlcnJvcjogdHJ1ZSB9KTtcbiAgICB9XG4gIH1cbn0pO1xuXG5hcHAucG9zdChcIi9wb3N0L2NvbW1lbnRcIiwgKHJlcSwgcmVzKSA9PiB7XG4gIHZhciBkYXRhID0ge1xuICAgIGNvbW1lbnQ6IHJlcS5ib2R5LmNvbW1lbnQsXG4gICAgaWQ6IHJlcS5ib2R5LmlkLFxuICAgIGJ5OiByZXEuY29va2llcy51c2VyLFxuICAgIGRhdGU6IG5ldyBEYXRlKClcbiAgfTtcbiAgaWYgKHJlcS5jb29raWVzLnVzZXIgJiYgYWxsb3dXcml0ZSkge1xuICAgIGRiLmdldChcIlNFTEVDVCAoY29tbWVudHMpIEZST00gUG9zdHMgV0hFUkUgaWQ9P1wiLCBbZGF0YS5pZF0sIChlcnIsIHJvdykgPT4ge1xuICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2cocm93KTtcbiAgICAgICAgaWYgKHJvdy5jb21tZW50cyA9PSBudWxsKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJmaXJzdFwiKTtcbiAgICAgICAgICBkYi5ydW4oXCJVUERBVEUgUG9zdHMgU0VUIGNvbW1lbnRzPT8gV0hFUkUgaWQ9P1wiLCBbXG4gICAgICAgICAgICBcIltcIiArIEpTT04uc3RyaW5naWZ5KGRhdGEpICsgXCJdXCIsXG4gICAgICAgICAgICBkYXRhLmlkXG4gICAgICAgICAgXSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGNvbSA9IEpTT04ucGFyc2Uocm93LmNvbW1lbnRzKTtcbiAgICAgICAgICBjb20ucHVzaChkYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhjb20pO1xuICAgICAgICAgIGRiLnJ1bihcIlVQREFURSBQb3N0cyBTRVQgY29tbWVudHM9PyBXSEVSRSBpZD0/XCIsIFtcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGNvbSksXG4gICAgICAgICAgICBkYXRhLmlkXG4gICAgICAgICAgXSk7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmVzLnNlbmQoXCJoaVwiKTtcbn0pO1xuXG5hcHAucG9zdChcIi9wb3N0L3ZvdGUvOndhdFwiLCAocmVxLCByZXMpID0+IHtcbiAgdmFyIHdoaWNoID0gcmVxLnBhcmFtcy53YXQ7XG4gIHZhciBpZCA9IHJlcS5ib2R5LmlkO1xuICB2YXIgdXNlciA9IHJlcS5jb29raWVzLnVzZXI7XG4gIHZhciBzZWxlY3Q7XG4gIGlmICh3aGljaCA9PSBcInVwXCIpIHtcbiAgICBzZWxlY3QgPSAxO1xuICB9IGVsc2Uge1xuICAgIHNlbGVjdCA9IC0xO1xuICB9XG4gIGlmIChyZXEuY29va2llcy51c2VyICYmIGFsbG93V3JpdGUpIHtcbiAgICBkYi5nZXQoXCJTRUxFQ1QgKiBGUk9NIFBvc3RzIFdIRVJFIGlkPT9cIiwgW2lkXSwgKGVyciwgcm93KSA9PiB7XG4gICAgICBpZiAoIWVycikge1xuICAgICAgICBpZiAod2hpY2ggPT0gXCJ1cFwiKSB7XG4gICAgICAgICAgdmFyIG9wdCA9IFwibGlrZVwiO1xuICAgICAgICAgIHZhciBhZGQgPSBcIisxXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG9wdCA9IFwiYmFkXCI7XG4gICAgICAgICAgdmFyIGFkZCA9IFwiLTFcIjtcbiAgICAgICAgfVxuICAgICAgICBkYi5nZXQoXCJTRUxFQ1QgbGlrZSBGUk9NIFVzZXJzXCIsIChlcnIsIGxpa2UpID0+IHtcbiAgICAgICAgICBkYi5nZXQoXCJTRUxFQ1QgYmFkIEZST00gVXNlcnNcIiwgKGVyciwgYmFkKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgICAgICB2YXIgb3V0O1xuICAgICAgICAgICAgICBpZiAob3B0ID09IFwibGlrZVwiKSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gSlNPTi5wYXJzZShsaWtlLmxpa2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dCA9IEpTT04ucGFyc2UoYmFkLmJhZCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKG91dCA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRtcCA9IFtdO1xuICAgICAgICAgICAgICAgIHRtcC5wdXNoKGlkKTtcbiAgICAgICAgICAgICAgICB0bXAgPSBKU09OLnN0cmluZ2lmeSh0bXApO1xuICAgICAgICAgICAgICAgIGRiLnJ1bihcbiAgICAgICAgICAgICAgICAgIGBVUERBVEUgVXNlcnMgU0VUICR7b3B0fT0/IFdIRVJFIHVzZXJuYW1lPT9gLFxuICAgICAgICAgICAgICAgICAgW3RtcCwgdXNlcl0sXG4gICAgICAgICAgICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZGIucnVuKFxuICAgICAgICAgICAgICAgICAgYFVQREFURSBQb3N0cyBTRVQgdm90ZXM9MCR7YWRkfSBXSEVSRSBpZD0/YCxcbiAgICAgICAgICAgICAgICAgIFtpZF0sXG4gICAgICAgICAgICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcCA9IG91dDtcbiAgICAgICAgICAgICAgICBpZiAob3V0LmluZGV4T2YoaWQpID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICB0bXAucHVzaChpZCk7XG4gICAgICAgICAgICAgICAgICBkYi5ydW4oXG4gICAgICAgICAgICAgICAgICAgIGBVUERBVEUgUG9zdHMgU0VUIHZvdGVzPXZvdGVzJHthZGR9IFdIRVJFIGlkPT9gLFxuICAgICAgICAgICAgICAgICAgICBbaWRdLFxuICAgICAgICAgICAgICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgZXJyb3I6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzZWxlY3QgPSAwO1xuICAgICAgICAgICAgICAgICAgdG1wLnNwbGljZSh0bXAuaW5kZXhPZihpZCksIDEpO1xuICAgICAgICAgICAgICAgICAgaWYgKGFkZCA9PSBcIisxXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkID0gXCItMVwiO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYWRkID0gXCIrMVwiO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGIucnVuKFxuICAgICAgICAgICAgICAgICAgICBgVVBEQVRFIFBvc3RzIFNFVCB2b3Rlcz12b3RlcyR7YWRkfSBXSEVSRSBpZD0/YCxcbiAgICAgICAgICAgICAgICAgICAgW2lkXSxcbiAgICAgICAgICAgICAgICAgICAgZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2VuZCh7IGVycm9yOiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdG1wID0gSlNPTi5zdHJpbmdpZnkodG1wKTtcbiAgICAgICAgICAgICAgICBkYi5ydW4oXG4gICAgICAgICAgICAgICAgICBgVVBEQVRFIFVzZXJzIFNFVCAke29wdH09PyBXSEVSRSB1c2VybmFtZT0/YCxcbiAgICAgICAgICAgICAgICAgIFt0bXAsIHVzZXJdLFxuICAgICAgICAgICAgICAgICAgZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgZXJyb3I6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChvcHQgPT0gXCJsaWtlXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYmFkLmJhZCAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICB2YXIgdG1wID0gSlNPTi5wYXJzZShiYWQuYmFkKTtcbiAgICAgICAgICAgICAgICAgIGlmICh0bXAuaW5kZXhPZihpZCkgIT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgZGIucnVuKFxuICAgICAgICAgICAgICAgICAgICAgIGBVUERBVEUgVXNlcnMgU0VUIGJhZD0/IFdIRVJFIHVzZXJuYW1lPT9gLFxuICAgICAgICAgICAgICAgICAgICAgIFt0bXAuc3BsaWNlKHRtcCwgMSksIHVzZXJdLFxuICAgICAgICAgICAgICAgICAgICAgIGVyciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgZXJyb3I6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobGlrZS5saWtlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgIHZhciB0bXAgPSBKU09OLnBhcnNlKGxpa2UubGlrZSk7XG4gICAgICAgICAgICAgICAgICBpZiAodG1wLmluZGV4T2YoaWQpICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLnJ1bihcbiAgICAgICAgICAgICAgICAgICAgICBgVVBEQVRFIFVzZXJzIFNFVCBsaWtlPT8gV0hFUkUgdXNlcm5hbWU9P2AsXG4gICAgICAgICAgICAgICAgICAgICAgW3RtcC5zcGxpY2UodG1wLCAxKSwgdXNlcl0sXG4gICAgICAgICAgICAgICAgICAgICAgZXJyID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGRiLmdldChcIlNFTEVDVCB2b3RlcyBGUk9NIFBvc3RzIFdIRVJFIGlkPT9cIiwgW2lkXSwgKGVyciwgcm93KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlcnIpIHtcbiAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgZXJyb3I6IGZhbHNlLCB2b3Rlczogcm93LnZvdGVzLCBzZWxlY3Q6IHNlbGVjdCB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVzLnNlbmQoeyBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXMuc2VuZCh7IGVycm9yOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59KTtcblxuYXBwLnBvc3QoXCIvdXNlci9hZGRVc2VyXCIsIChyZXEsIHJlcykgPT4ge1xuICBjb25zb2xlLmxvZyhgYWRkIHRvIG5ldyB1c2VyICR7cmVxLmJvZHl9YCk7XG4gIGlmIChhbGxvd1dyaXRlKSB7XG4gICAgY29uc3QgdXNlciA9IGNsZWFuc2VTdHJpbmcocmVxLmJvZHkudXNlcm5hbWUpO1xuICAgIGNvbnN0IHBhc3MgPSByZXEuYm9keS5wYXNzd29yZDtcbiAgICBjb25zdCBqb2luZWQgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnNvbGUubG9nKFwiQWRkIHVzZXI6IFwiICsgdXNlciArIFwiQFwiICsgcGFzcyk7XG4gICAgZGIuZ2V0KFxuICAgICAgYFNFTEVDVCB1c2VybmFtZSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lPT9gLFxuICAgICAgW3VzZXJdLFxuICAgICAgKGVycm9yLCByb3cpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2cocm93KTtcbiAgICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgICBkYi5ydW4oXG4gICAgICAgICAgICBgSU5TRVJUIElOVE8gVXNlcnMgKHVzZXJuYW1lLCBwYXNzd29yZCwgam9pbmVkKSBWQUxVRVMgKD8sPywgPylgLFxuICAgICAgICAgICAgW3VzZXIsIHBhc3MsIGpvaW5lZF0sXG4gICAgICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IhXCIpO1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU29tZXRoaW5nIGhhcHBlbmVkLCBwbGVhc2UgdHJ5IGFnYWluXCIsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICByZXNcbiAgICAgICAgICAgICAgICAgIC5jb29raWUoXCJ1c2VyXCIsIHVzZXIsIHsgbWF4QWdlOiAxODAwMDAwIH0pXG4gICAgICAgICAgICAgICAgICAuc2VuZCh7IG1lc3NhZ2U6IFwic3VjY2Vzc1wiLCBlcnJvcjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlciBhbHJlYWR5IGV4aXN0cyFcIik7XG4gICAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiBcIlVzZXIgYWxyZWFkeSBleGlzdHMhXCIsIGVycm9yOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgKTtcbiAgfVxufSk7XG5cbmFwcC5wb3N0KFwiL3VzZXIvbG9naW5cIiwgKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBjbGVhbnNlU3RyaW5nKHJlcS5ib2R5LnVzZXJuYW1lKTtcbiAgY29uc3QgcGFzcyA9IGNsZWFuc2VTdHJpbmcocmVxLmJvZHkucGFzc3dvcmQpO1xuICBjb25zb2xlLmxvZyhcIkxvZ2luIHVzZXI6IFwiICsgdXNlciArIFwiQFwiICsgcGFzcyk7XG4gIGRiLmdldChcbiAgICBgU0VMRUNUIHVzZXJuYW1lIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWU9P2AsXG4gICAgW3VzZXJdLFxuICAgIChlcnJvciwgcm93KSA9PiB7XG4gICAgICBpZiAocm93KSB7XG4gICAgICAgIGRiLmdldChcbiAgICAgICAgICBgU0VMRUNUIHBhc3N3b3JkIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWU9P2AsXG4gICAgICAgICAgW3VzZXJdLFxuICAgICAgICAgIChlcnIsIHJvdykgPT4ge1xuICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIVwiKTtcbiAgICAgICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU29tZXRoaW5nIGhhcHBlbmVkLCBwbGVhc2UgdHJ5IGFnYWluXCIsXG4gICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAocm93LnBhc3N3b3JkID09IHBhc3MpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgcmVzXG4gICAgICAgICAgICAgICAgICAuY29va2llKFwidXNlclwiLCB1c2VyLCB7IG1heEFnZTogNjAwMDAwIH0pXG4gICAgICAgICAgICAgICAgICAuc2VuZCh7IG1lc3NhZ2U6IFwic3VjY2Vzc1wiLCBlcnJvcjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbmNvcnJlY3QgcGFzc3dvcmRcIik7XG4gICAgICAgICAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiBcIkluY29ycmVjdCBwYXNzd29yZFwiLCBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwidXNlciBkb2VzIG5vdCBleGlzdFwiKTtcbiAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiBcIlVzZXIgZG9lcyBub3QgZXhpc3RcIiwgZXJyb3I6IHRydWUgfSk7XG4gICAgICB9XG4gICAgfVxuICApO1xufSk7XG5cbmFwcC5wb3N0KFwiL3VzZXIvZGVsZXRlVXNlclwiLCAocmVxLCByZXMpID0+IHtcbiAgaWYgKGFsbG93V3JpdGUpIHtcbiAgICBjb25zdCB1c2VyID0gcmVxLmNvb2tpZXMudXNlcjtcbiAgICBjb25zb2xlLmxvZyhcIkRlbGV0ZSB1c2VyOiBcIiArIHVzZXIpO1xuICAgIGlmICh1c2VyKSB7XG4gICAgICBkYi5nZXQoXG4gICAgICAgIGBTRUxFQ1QgdXNlcm5hbWUgRlJPTSBVc2VycyBXSEVSRSB1c2VybmFtZT0/YCxcbiAgICAgICAgW3VzZXJdLFxuICAgICAgICAoZXJyb3IsIHJvdykgPT4ge1xuICAgICAgICAgIGlmIChyb3cpIHtcbiAgICAgICAgICAgIGRiLnJ1bihgREVMRVRFIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWU9P2AsIFt1c2VyXSwgZXJyID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IhXCIpO1xuICAgICAgICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiU29tZXRoaW5nIGhhcHBlbmVkLCBwbGVhc2UgdHJ5IGFnYWluXCIsXG4gICAgICAgICAgICAgICAgICBlcnJvcjogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6IFwic3VjY2Vzc1wiLCBlcnJvcjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgZG9lcyBub3QgZXhpc3RcIik7XG4gICAgICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6IFwiVXNlciBkb2VzIG5vdCBleGlzdFwiLCBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwibm8gc2lnbmVkIGluIHVzZXJcIik7XG4gICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6IFwiTm8gc2lnbmVkIGluIHVzZXJcIiwgZXJyb3I6IHRydWUgfSk7XG4gICAgfVxuICB9XG59KTtcblxuYXBwLnBvc3QoXCIvdXNlci91cGRhdGVQYXNzXCIsIChyZXEsIHJlcykgPT4ge1xuICBpZiAoYWxsb3dXcml0ZSkge1xuICAgIGNvbnN0IHVzZXIgPSByZXEuY29va2llcy51c2VyO1xuICAgIGNvbnN0IG9sZHBhc3MgPSByZXEuYm9keS5vbGRwYXNzO1xuICAgIGNvbnN0IG5ld3Bhc3MgPSByZXEuYm9keS5uZXdwYXNzO1xuICAgIGNvbnNvbGUubG9nKFwiVXBkYXRlIHVzZXIgcGFzc3dvcmQ6IFwiICsgdXNlciArIFwiIHRvIFwiICsgbmV3cGFzcyk7XG4gICAgaWYgKHVzZXIpIHtcbiAgICAgIGRiLmdldChcbiAgICAgICAgYFNFTEVDVCB1c2VybmFtZSBGUk9NIFVzZXJzIFdIRVJFIHVzZXJuYW1lPT9gLFxuICAgICAgICBbdXNlcl0sXG4gICAgICAgIChlcnJvciwgcm93KSA9PiB7XG4gICAgICAgICAgaWYgKHJvdykge1xuICAgICAgICAgICAgZGIuZ2V0KFxuICAgICAgICAgICAgICBgU0VMRUNUIHBhc3N3b3JkIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWU9P2AsXG4gICAgICAgICAgICAgIFt1c2VyXSxcbiAgICAgICAgICAgICAgKGVycm9yLCByb3cpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocm93LnBhc3N3b3JkID09IG9sZHBhc3MpIHtcbiAgICAgICAgICAgICAgICAgIGRiLnJ1bihcbiAgICAgICAgICAgICAgICAgICAgYFVQREFURSBVc2VycyBTRVQgcGFzc3dvcmQ9PyBXSEVSRSB1c2VybmFtZT0/YCxcbiAgICAgICAgICAgICAgICAgICAgW25ld3Bhc3MsIHVzZXJdLFxuICAgICAgICAgICAgICAgICAgICBlcnIgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3IhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIlNvbWV0aGluZyBoYXBwZW5lZCwgcGxlYXNlIHRyeSBhZ2FpblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHsgbWVzc2FnZTogXCJzdWNjZXNzXCIsIGVycm9yOiBmYWxzZSB9KTtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJJbmNvcnJlY3QgcGFzc3dvcmRcIixcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJ1c2VyIGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiBcIlVzZXIgZG9lcyBub3QgZXhpc3RcIiwgZXJyb3I6IHRydWUgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIm5vIHNpZ25lZCBpbiB1c2VyXCIpO1xuICAgICAgcmVzLnNlbmQoeyBtZXNzYWdlOiBcIk5vIHNpZ25lZCBpbiB1c2VyXCIsIGVycm9yOiB0cnVlIH0pO1xuICAgIH1cbiAgfVxufSk7XG5cbmFwcC5wb3N0KFwiL3VzZXIvdXBkYXRlU3RhdHVzXCIsIChyZXEsIHJlcykgPT4ge1xuICBpZiAoYWxsb3dXcml0ZSkge1xuICAgIGNvbnN0IHVzZXIgPSByZXEuY29va2llcy51c2VyO1xuICAgIC8vIGNvbnN0IHN0YXR1cyA9IGNsZWFuc2VTdHJpbmcocmVxLmJvZHkuc3RhdHVzKTtcbiAgICBjb25zdCBzdGF0dXMgPSByZXEuYm9keS5zdGF0dXM7XG4gICAgY29uc29sZS5sb2coXCJVcGRhdGUgdXNlciBzdGF0dXM6IFwiICsgdXNlciArIFwiIHRvIFwiICsgc3RhdHVzKTtcbiAgICBpZiAodXNlcikge1xuICAgICAgZGIuZ2V0KFxuICAgICAgICBgU0VMRUNUIHVzZXJuYW1lIEZST00gVXNlcnMgV0hFUkUgdXNlcm5hbWU9P2AsXG4gICAgICAgIFt1c2VyXSxcbiAgICAgICAgKGVycm9yLCByb3cpID0+IHtcbiAgICAgICAgICBpZiAocm93KSB7XG4gICAgICAgICAgICBkYi5ydW4oXG4gICAgICAgICAgICAgIGBVUERBVEUgVXNlcnMgU0VUIHN0YXR1cz0/IFdIRVJFIHVzZXJuYW1lPT9gLFxuICAgICAgICAgICAgICBbc3RhdHVzLCB1c2VyXSxcbiAgICAgICAgICAgICAgZXJyID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcImVycm9yIVwiKTtcbiAgICAgICAgICAgICAgICAgIHJlcy5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJTb21ldGhpbmcgaGFwcGVuZWQsIHBsZWFzZSB0cnkgYWdhaW5cIixcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IHRydWVcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6IFwic3VjY2Vzc1wiLCBlcnJvcjogZmFsc2UgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInVzZXIgZG9lcyBub3QgZXhpc3RcIik7XG4gICAgICAgICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6IFwiVXNlciBkb2VzIG5vdCBleGlzdFwiLCBlcnJvcjogdHJ1ZSB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwibm8gc2lnbmVkIGluIHVzZXJcIik7XG4gICAgICByZXMuc2VuZCh7IG1lc3NhZ2U6IFwiTm8gc2lnbmVkIGluIHVzZXJcIiwgZXJyb3I6IHRydWUgfSk7XG4gICAgfVxuICB9XG59KTtcblxuYXBwLmdldChcIi9yZXNldFwiLCAocmVxLCByZXMpID0+IHtcbiAgaWYgKGFsbG93UmVzZXQpIHtcbiAgICBkYi5zZXJpYWxpemUoKCkgPT4ge1xuICAgICAgZGIucnVuKFwiRFJPUCBUQUJMRSBJRiBFWElTVFMgVXNlcnNcIik7XG4gICAgICBkYi5ydW4oXCJEUk9QIFRBQkxFIElGIEVYSVNUUyBQb3N0c1wiKTtcbiAgICAgIGRiLnJ1bihcbiAgICAgICAgXCJDUkVBVEUgVEFCTEUgVXNlcnMgKGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwgdXNlcm5hbWUgVEVYVCwgcGFzc3dvcmQgVGV4dCwgam9pbmVkIFRFWFQsIHN0YXR1cyBURVhULCBsaWtlIFRFWFQsIGJhZCBURVhULCBwcm9maWxlcGljIEJMT0IpXCJcbiAgICAgICk7XG4gICAgICBkYi5ydW4oXG4gICAgICAgIFwiQ1JFQVRFIFRBQkxFIFBvc3RzIChpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsIHRpdGxlIFRFWFQsIHBvc3QgVGV4dCwgYnkgVEVYVCwgZGF0ZSBURVhULCB0YWcgVEVYVCwgdm90ZXMgSU5URUdFUiwgY29tbWVudHMgVEVYVClcIlxuICAgICAgKTtcbiAgICAgIGRiLnJ1bihcbiAgICAgICAgXCJDUkVBVEUgVEFCTEUgU2Vzc2lvbnMgKGlkIElOVEVHRVIgUFJJTUFSWSBLRVkgQVVUT0lOQ1JFTUVOVCwga2V5IFRFWFQgZXhwaXJlcyBURVhUKVwiXG4gICAgICApO1xuXG4gICAgICBjb25zb2xlLmxvZyhcIlJFU0VUIVwiKTtcbiAgICB9KTtcbiAgfVxufSk7XG5cbi8vIGhlbHBlciBmdW5jdGlvbiB0aGF0IHByZXZlbnRzIGh0bWwvY3NzL3NjcmlwdCBtYWxpY2VcbmNvbnN0IGNsZWFuc2VTdHJpbmcgPSBmdW5jdGlvbihzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZ1xuICAgIC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIilcbiAgICAucmVwbGFjZSgvPC9nLCBcIiZsdDtcIilcbiAgICAucmVwbGFjZSgvPi9nLCBcIiZndDtcIik7XG59O1xuXG5hcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzKSB7XG4gIHJlcy5zdGF0dXMoNDA0KS5zZW5kRmlsZShgJHtfX2Rpcm5hbWV9L3ZpZXdzLzQwNC5odG1sYCk7XG59KTtcblxuLy8gbGlzdGVuIGZvciByZXF1ZXN0cyA6KVxudmFyIGxpc3RlbmVyID0gYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JULCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKGBZb3VyIGFwcCBpcyBsaXN0ZW5pbmcgb24gcG9ydCAke2xpc3RlbmVyLmFkZHJlc3MoKS5wb3J0fWApO1xufSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "express",
        "require",
        "bodyParser",
        "Cookies",
        "favicon",
        "app",
        "fs",
        "use",
        "urlencoded",
        "extended",
        "json",
        "allowWrite",
        "allowReset",
        "static",
        "__dirname",
        "dbFile",
        "exists",
        "existsSync",
        "sqlite3",
        "verbose",
        "db",
        "Database",
        "serialize",
        "run",
        "console",
        "log",
        "get",
        "req",
        "res",
        "sendFile",
        "data",
        "cookies",
        "user",
        "err",
        "row",
        "status",
        "like",
        "bad",
        "send",
        "clearCookie",
        "message",
        "params",
        "joined",
        "all",
        "limit",
        "query",
        "offset",
        "sub",
        "id",
        "post",
        "body",
        "title",
        "posted",
        "tag",
        "date",
        "Date",
        "by",
        "error",
        "cookie",
        "maxAge",
        "comment",
        "comments",
        "JSON",
        "stringify",
        "com",
        "parse",
        "push",
        "which",
        "wat",
        "select",
        "opt",
        "add",
        "out",
        "tmp",
        "indexOf",
        "splice",
        "votes",
        "cleanseString",
        "username",
        "pass",
        "password",
        "oldpass",
        "newpass",
        "string",
        "replace",
        "listener",
        "listen",
        "process",
        "env",
        "PORT",
        "address",
        "port"
      ],
      "mappings": "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",
      "file": "server.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "// server.js\n// where your node app starts\n\n// init project\nconst express = require(\"express\");\nconst bodyParser = require(\"body-parser\");\nconst Cookies = require(\"cookie-parser\");\nconst favicon = require(\"express-favicon\");\nconst app = express();\nconst fs = require(\"fs\");\napp.use(bodyParser.urlencoded({ extended: true }));\napp.use(bodyParser.json());\n\nconst allowWrite = true;\nconst allowReset = false;\n\n// we've started you off with Express,\n// but feel free to use whatever libs or frameworks you'd like through `package.json`.\n\n// http://expressjs.com/en/starter/static-files.html\napp.use(express.static(\"public\"));\napp.use(favicon(`${__dirname}/public/favicon.ico`));\napp.use(Cookies());\n\n// init sqlite db\nconst dbFile = \"./.data/sqlite.db\";\nconst exists = fs.existsSync(dbFile);\nconst sqlite3 = require(\"sqlite3\").verbose();\nconst db = new sqlite3.Database(dbFile);\n\n// if ./.data/sqlite.db does not exist, create it, otherwise print records to console\ndb.serialize(() => {\n  if (!exists) {\n    db.run(\"DROP TABLE IF EXISTS Users\");\n    db.run(\"DROP TABLE IF EXISTS Posts\");\n    db.run(\n      \"CREATE TABLE Users (id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT, password Text, joined TEXT, status TEXT, like TEXT, bad TEXT, profilepic BLOB)\"\n    );\n    db.run(\n      \"CREATE TABLE Posts (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, post Text, by TEXT, date TEXT, tag TEXT, votes INTEGER, comments TEXT)\"\n    );\n    db.run(\n      \"CREATE TABLE Sessions (id INTEGER PRIMARY KEY AUTOINCREMENT, key TEXT expires TEXT)\"\n    );\n    console.log(\"it is done\");\n  }\n});\n\n// http://expressjs.com/en/starter/basic-routing.html\napp.get(\"/\", (req, res) => {\n  res.sendFile(`${__dirname}/views/index.html`);\n});\n\n// http://expressjs.com/en/starter/basic-routing.html\napp.get(\"/test\", (req, res) => {\n  db.run(\"ALTER TABLE Users ADD profilepic BLOB\");\n  res.sendFile(`${__dirname}/views/test.html`);\n});\n\napp.get(\"/signup\", (req, res) => {\n  res.sendFile(`${__dirname}/views/signup.html`);\n});\n\n// http://expressjs.com/en/starter/basic-routing.html\napp.get(\"/login\", (req, res) => {\n  res.sendFile(`${__dirname}/views/login.html`);\n});\n\napp.get(\"/edit\", (req, res) => {\n  res.sendFile(`${__dirname}/views/edit.html`);\n});\n\napp.get(\"/t/card\", (req, res) => {\n  res.sendFile(`${__dirname}/templates/card.html`);\n});\n\napp.get(\"/t/comment\", (req, res) => {\n  res.sendFile(`${__dirname}/templates/comment.html`);\n});\n\napp.get(\"/user\", (req, res) => {\n  var data = req.cookies;\n  if (data.user) {\n    db.get(\n      \"SELECT status, joined, like, bad FROM Users WHERE username=?\",\n      [data.user],\n      (err, row) => {\n        if (!err) {\n          if (row) {\n            data.status = row.status;\n            data.like = row.like;\n            data.bad = row.bad;\n          }\n          if (data.like == null) {\n            data.like = \"[]\";\n          }\n          if (data.bad == null) {\n            data.bad = \"[]\";\n          }\n          res.send(data);\n        }\n      }\n    );\n  } else res.send({});\n});\n\napp.get(\"/logout\", (req, res) => {\n  res.clearCookie(\"user\").send({ message: \"success\" });\n});\n\napp.get(\"/post\", (req, res) => {\n  res.sendFile(`${__dirname}/views/new.html`);\n});\n\napp.get(\"/@:user\", (req, res) => {\n  res.sendFile(`${__dirname}/views/user.html`);\n});\n\napp.get(\"/~:sub\", (req, res) => {\n  res.sendFile(`${__dirname}/views/sub.html`);\n});\n\napp.get(\"/-:post\", (req, res) => {\n  res.sendFile(`${__dirname}/views/post.html`);\n});\n\napp.get(\"/get/users/:user\", (req, res) => {\n  var data = {};\n  data.user = req.params.user;\n  db.get(\n    \"SELECT status, joined FROM Users WHERE username=?\",\n    [data.user],\n    (err, row) => {\n      if (!err) {\n        if (row) {\n          data.status = row.status;\n          data.joined = row.joined;\n        }\n        res.send(data);\n      }\n    }\n  );\n});\n\napp.get(\"/get/users/\", (req, res) => {\n  db.all(\"SELECT username, status, joined FROM Users\", [], (err, row) => {\n    if (!err) {\n      if (row) {\n        res.send(row);\n      }\n    }\n  });\n});\n\napp.get(\"/get/posts/:sub\", (req, res) => {\n  var limit = req.query.limit;\n  var offset = req.query.offset;\n  var user = req.query.user;\n  if (!limit) {\n    limit = 10;\n  }\n  if (!offset) {\n    offset = 0;\n  }\n  if (!user) {\n    user = \"%\";\n  }\n  var data = {};\n  data.sub = req.params.sub;\n  db.all(\n    \"SELECT * FROM Posts WHERE (tag=? AND by LIKE ?) ORDER BY id DESC LIMIT ? OFFSET ?\",\n    [data.sub, user, limit, offset],\n    (err, row) => {\n      if (!err) {\n        if (row) {\n          res.send(row);\n        }\n      }\n    }\n  );\n});\n\napp.get(\"/get/posts/\", (req, res) => {\n  var limit = req.query.limit;\n  var offset = req.query.offset;\n  var user = req.query.user;\n  if (!limit) {\n    limit = 10;\n  }\n  if (!offset) {\n    offset = 0;\n  }\n  if (!user) {\n    user = \"%\";\n  }\n  db.all(\n    \"SELECT * FROM Posts WHERE (by LIKE ?) ORDER BY id DESC LIMIT ? OFFSET ?\",\n    [user, limit, offset],\n    (err, row) => {\n      if (!err) {\n        res.send(row);\n      }\n    }\n  );\n});\napp.get(\"/get/post/:id\", (req, res) => {\n  db.get(\"SELECT * FROM Posts WHERE id=?\", [req.params.id], (err, row) => {\n    if (!err) {\n      res.send(row);\n    }\n  });\n});\n\napp.post(\"/post/submitPost\", (req, res) => {\n  console.log(`Submit new post ${req.body.title}`);\n  if (allowWrite) {\n    if (!req.cookies.posted) {\n      const title = req.body.title;\n      const post = req.body.post;\n      const tag = req.body.tag;\n      const date = new Date();\n      const by = req.cookies.user;\n      if (by) {\n        db.run(\n          `INSERT INTO Posts (title, post, by, date, tag) VALUES (?,?,?,?,?)`,\n          [title, post, by, date, tag],\n          err => {\n            if (err) {\n              console.log(err);\n              console.log(\"error!\");\n              res.send({\n                message: \"Something happened, please try again\",\n                error: true\n              });\n            } else {\n              console.log(\"success\");\n              res\n                .cookie(\"posted\", true, { maxAge: 60000 })\n                .send({ message: \"success\", error: false });\n            }\n          }\n        );\n      } else {\n        res.send({ message: \"No user!\", error: true });\n      }\n    } else {\n      res.send({ message: \"Too many posts!\", error: true });\n    }\n  }\n});\n\napp.post(\"/post/comment\", (req, res) => {\n  var data = {\n    comment: req.body.comment,\n    id: req.body.id,\n    by: req.cookies.user,\n    date: new Date()\n  };\n  if (req.cookies.user && allowWrite) {\n    db.get(\"SELECT (comments) FROM Posts WHERE id=?\", [data.id], (err, row) => {\n      if (!err) {\n        console.log(row);\n        if (row.comments == null) {\n          console.log(\"first\");\n          db.run(\"UPDATE Posts SET comments=? WHERE id=?\", [\n            \"[\" + JSON.stringify(data) + \"]\",\n            data.id\n          ]);\n        } else {\n          var com = JSON.parse(row.comments);\n          com.push(data);\n          console.log(com);\n          db.run(\"UPDATE Posts SET comments=? WHERE id=?\", [\n            JSON.stringify(com),\n            data.id\n          ]);\n          console.log(data);\n        }\n      } else {\n        console.log(err);\n      }\n    });\n  }\n  res.send(\"hi\");\n});\n\napp.post(\"/post/vote/:wat\", (req, res) => {\n  var which = req.params.wat;\n  var id = req.body.id;\n  var user = req.cookies.user;\n  var select;\n  if (which == \"up\") {\n    select = 1;\n  } else {\n    select = -1;\n  }\n  if (req.cookies.user && allowWrite) {\n    db.get(\"SELECT * FROM Posts WHERE id=?\", [id], (err, row) => {\n      if (!err) {\n        if (which == \"up\") {\n          var opt = \"like\";\n          var add = \"+1\";\n        } else {\n          var opt = \"bad\";\n          var add = \"-1\";\n        }\n        db.get(\"SELECT like FROM Users\", (err, like) => {\n          db.get(\"SELECT bad FROM Users\", (err, bad) => {\n            if (!err) {\n              var out;\n              if (opt == \"like\") {\n                out = JSON.parse(like.like);\n              } else {\n                out = JSON.parse(bad.bad);\n              }\n              if (out == null) {\n                let tmp = [];\n                tmp.push(id);\n                tmp = JSON.stringify(tmp);\n                db.run(\n                  `UPDATE Users SET ${opt}=? WHERE username=?`,\n                  [tmp, user],\n                  err => {\n                    if (err) {\n                      res.send({ error: true });\n                    }\n                  }\n                );\n                db.run(\n                  `UPDATE Posts SET votes=0${add} WHERE id=?`,\n                  [id],\n                  err => {\n                    if (err) {\n                      res.send({ error: true });\n                    }\n                  }\n                );\n              } else {\n                var tmp = out;\n                if (out.indexOf(id) == -1) {\n                  tmp.push(id);\n                  db.run(\n                    `UPDATE Posts SET votes=votes${add} WHERE id=?`,\n                    [id],\n                    err => {\n                      if (err) {\n                        res.send({ error: true });\n                      }\n                    }\n                  );\n                } else {\n                  select = 0;\n                  tmp.splice(tmp.indexOf(id), 1);\n                  if (add == \"+1\") {\n                    add = \"-1\";\n                  } else {\n                    add = \"+1\";\n                  }\n                  db.run(\n                    `UPDATE Posts SET votes=votes${add} WHERE id=?`,\n                    [id],\n                    err => {\n                      if (err) {\n                        res.send({ error: true });\n                      }\n                    }\n                  );\n                }\n                tmp = JSON.stringify(tmp);\n                db.run(\n                  `UPDATE Users SET ${opt}=? WHERE username=?`,\n                  [tmp, user],\n                  err => {\n                    if (err) {\n                      res.send({ error: true });\n                    }\n                  }\n                );\n              }\n              if (opt == \"like\") {\n                if (bad.bad != null) {\n                  var tmp = JSON.parse(bad.bad);\n                  if (tmp.indexOf(id) != -1) {\n                    db.run(\n                      `UPDATE Users SET bad=? WHERE username=?`,\n                      [tmp.splice(tmp, 1), user],\n                      err => {\n                        if (err) {\n                          res.send({ error: true });\n                        }\n                      }\n                    );\n                  }\n                }\n              } else {\n                if (like.like != null) {\n                  var tmp = JSON.parse(like.like);\n                  if (tmp.indexOf(id) != -1) {\n                    db.run(\n                      `UPDATE Users SET like=? WHERE username=?`,\n                      [tmp.splice(tmp, 1), user],\n                      err => {\n                        if (err) {\n                          res.send({ error: true });\n                        }\n                      }\n                    );\n                  }\n                }\n              }\n              db.get(\"SELECT votes FROM Posts WHERE id=?\", [id], (err, row) => {\n                if (!err) {\n                  res.send({ error: false, votes: row.votes, select: select });\n                } else {\n                  res.send({ error: true });\n                }\n              });\n            } else {\n              res.send({ error: true });\n            }\n          });\n        });\n      } else {\n        res.send({ error: true });\n      }\n    });\n  }\n});\n\napp.post(\"/user/addUser\", (req, res) => {\n  console.log(`add to new user ${req.body}`);\n  if (allowWrite) {\n    const user = cleanseString(req.body.username);\n    const pass = req.body.password;\n    const joined = new Date();\n    console.log(\"Add user: \" + user + \"@\" + pass);\n    db.get(\n      `SELECT username FROM Users WHERE username=?`,\n      [user],\n      (error, row) => {\n        console.log(row);\n        if (!row) {\n          db.run(\n            `INSERT INTO Users (username, password, joined) VALUES (?,?, ?)`,\n            [user, pass, joined],\n            error => {\n              if (error) {\n                console.log(\"error!\");\n                res.send({\n                  message: \"Something happened, please try again\",\n                  error: true\n                });\n              } else {\n                console.log(\"success\");\n                res\n                  .cookie(\"user\", user, { maxAge: 1800000 })\n                  .send({ message: \"success\", error: false });\n              }\n            }\n          );\n        } else {\n          console.log(\"User already exists!\");\n          res.send({ message: \"User already exists!\", error: true });\n        }\n      }\n    );\n  }\n});\n\napp.post(\"/user/login\", (req, res) => {\n  const user = cleanseString(req.body.username);\n  const pass = cleanseString(req.body.password);\n  console.log(\"Login user: \" + user + \"@\" + pass);\n  db.get(\n    `SELECT username FROM Users WHERE username=?`,\n    [user],\n    (error, row) => {\n      if (row) {\n        db.get(\n          `SELECT password FROM Users WHERE username=?`,\n          [user],\n          (err, row) => {\n            if (err) {\n              console.log(\"error!\");\n              res.send({\n                message: \"Something happened, please try again\",\n                error: true\n              });\n            } else {\n              if (row.password == pass) {\n                console.log(\"success\");\n                res\n                  .cookie(\"user\", user, { maxAge: 600000 })\n                  .send({ message: \"success\", error: false });\n              } else {\n                console.log(\"incorrect password\");\n                res.send({ message: \"Incorrect password\", error: true });\n              }\n            }\n          }\n        );\n      } else {\n        console.log(\"user does not exist\");\n        res.send({ message: \"User does not exist\", error: true });\n      }\n    }\n  );\n});\n\napp.post(\"/user/deleteUser\", (req, res) => {\n  if (allowWrite) {\n    const user = req.cookies.user;\n    console.log(\"Delete user: \" + user);\n    if (user) {\n      db.get(\n        `SELECT username FROM Users WHERE username=?`,\n        [user],\n        (error, row) => {\n          if (row) {\n            db.run(`DELETE FROM Users WHERE username=?`, [user], err => {\n              if (err) {\n                console.log(\"error!\");\n                res.send({\n                  message: \"Something happened, please try again\",\n                  error: true\n                });\n              } else {\n                console.log(\"success\");\n                res.send({ message: \"success\", error: false });\n              }\n            });\n          } else {\n            console.log(\"user does not exist\");\n            res.send({ message: \"User does not exist\", error: true });\n          }\n        }\n      );\n    } else {\n      console.log(\"no signed in user\");\n      res.send({ message: \"No signed in user\", error: true });\n    }\n  }\n});\n\napp.post(\"/user/updatePass\", (req, res) => {\n  if (allowWrite) {\n    const user = req.cookies.user;\n    const oldpass = req.body.oldpass;\n    const newpass = req.body.newpass;\n    console.log(\"Update user password: \" + user + \" to \" + newpass);\n    if (user) {\n      db.get(\n        `SELECT username FROM Users WHERE username=?`,\n        [user],\n        (error, row) => {\n          if (row) {\n            db.get(\n              `SELECT password FROM Users WHERE username=?`,\n              [user],\n              (error, row) => {\n                if (row.password == oldpass) {\n                  db.run(\n                    `UPDATE Users SET password=? WHERE username=?`,\n                    [newpass, user],\n                    err => {\n                      if (err) {\n                        console.log(\"error!\");\n                        res.send({\n                          message: \"Something happened, please try again\",\n                          error: true\n                        });\n                      } else {\n                        console.log(\"success\");\n                        res.send({ message: \"success\", error: false });\n                      }\n                    }\n                  );\n                } else {\n                  res.send({\n                    message: \"Incorrect password\",\n                    error: true\n                  });\n                }\n              }\n            );\n          } else {\n            console.log(\"user does not exist\");\n            res.send({ message: \"User does not exist\", error: true });\n          }\n        }\n      );\n    } else {\n      console.log(\"no signed in user\");\n      res.send({ message: \"No signed in user\", error: true });\n    }\n  }\n});\n\napp.post(\"/user/updateStatus\", (req, res) => {\n  if (allowWrite) {\n    const user = req.cookies.user;\n    // const status = cleanseString(req.body.status);\n    const status = req.body.status;\n    console.log(\"Update user status: \" + user + \" to \" + status);\n    if (user) {\n      db.get(\n        `SELECT username FROM Users WHERE username=?`,\n        [user],\n        (error, row) => {\n          if (row) {\n            db.run(\n              `UPDATE Users SET status=? WHERE username=?`,\n              [status, user],\n              err => {\n                if (err) {\n                  console.log(\"error!\");\n                  res.send({\n                    message: \"Something happened, please try again\",\n                    error: true\n                  });\n                } else {\n                  console.log(\"success\");\n                  res.send({ message: \"success\", error: false });\n                }\n              }\n            );\n          } else {\n            console.log(\"user does not exist\");\n            res.send({ message: \"User does not exist\", error: true });\n          }\n        }\n      );\n    } else {\n      console.log(\"no signed in user\");\n      res.send({ message: \"No signed in user\", error: true });\n    }\n  }\n});\n\napp.get(\"/reset\", (req, res) => {\n  if (allowReset) {\n    db.serialize(() => {\n      db.run(\"DROP TABLE IF EXISTS Users\");\n      db.run(\"DROP TABLE IF EXISTS Posts\");\n      db.run(\n        \"CREATE TABLE Users (id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT, password Text, joined TEXT, status TEXT, like TEXT, bad TEXT, profilepic BLOB)\"\n      );\n      db.run(\n        \"CREATE TABLE Posts (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, post Text, by TEXT, date TEXT, tag TEXT, votes INTEGER, comments TEXT)\"\n      );\n      db.run(\n        \"CREATE TABLE Sessions (id INTEGER PRIMARY KEY AUTOINCREMENT, key TEXT expires TEXT)\"\n      );\n\n      console.log(\"RESET!\");\n    });\n  }\n});\n\n// helper function that prevents html/css/script malice\nconst cleanseString = function(string) {\n  return string\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\");\n};\n\napp.use(function(req, res) {\n  res.status(404).sendFile(`${__dirname}/views/404.html`);\n});\n\n// listen for requests :)\nvar listener = app.listen(process.env.PORT, () => {\n  console.log(`Your app is listening on port ${listener.address().port}`);\n});\n"
      ]
    },
    "mtime": 1581817215000
  }
}