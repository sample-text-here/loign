<!DOCTYPE html>
<html lang="en">
  <head>
    <title>New post</title>
    <link
      id="favicon"
      rel="icon"
      href="https://drive.google.com/uc?id=1a2JLNm5F9rHG2JrelkLg2R-QoMT2DkPY"
      type="image/x-icon"
    />
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- import the webpage's stylesheet -->
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body class="mainform">
    <div class="center">
      <form id="form" style="min-width:340px;">
        <h2>Post</h2>
        <input id="title" type="text" maxlength="100" placeholder="title" />
        <textarea
          id="post"
          placeholder="post"
          style="border:solid lightgray 1px;border-radius:2px;"
        ></textarea><br>Tag:
        <select id="sub"
          ><option>Tech</option
          ><option>News</option
          ><option>Funny</option></select
        ><br><br>
        <button type="submit" id="submit" class="hotspot">Submit</button>
        <br /><br /><span id="error"></span>
      </form>
    </div>
    <script src="h.js"></script>

    <script>

      $("form").onsubmit = e => {
        e.preventDefault();
        const data = {
          title: $("title").value,
          post: $("post").value,
          tag: $("sub").value
        };

        if (!data.title) {
          parseError("Title is empty!");
          return false;
        }

        if (!data.post) {
          parseError("There's no post!");
          return false;
        }

        fetch("/post/submitPost", {
          method: "POST",
          body: JSON.stringify(data),
          headers: { "Content-Type": "application/json" }
        })
          .then(res => res.json())
          .then(res => {
            if (!res.error) {
              goto("..");
            } else {
              parseError(res.message);
            }
          });
      };

      
    </script>

    <script src="link.js"></script>
<!--         <script src="cursor.js"></script> -->

    <!-- include the Glitch button to show what the webpage is about and
            to make it easier for folks to view source and remix -->
    <div class="glitchButton" style="position:fixed;top:20px;right:20px;"></div>
    <script src="https://button.glitch.me/button.js"></script>
  </body>
</html>
